VFS_GPFS(8)                                                        VFS_GPFS(8)



NAME
       vfs_gpfs - gpfs specific samba extensions like acls and prealloc

SYNOPSIS
       vfs objects = gpfs

DESCRIPTION
       This VFS module is part of the samba(7) suite.

       The  gpfs  VFS  module  is  the home for all gpfs extensions that Samba
       requires for proper integration with GPFS.  It  uses  the  GPL  library
       interfaces provided by GPFS.

       Currently the gpfs vfs module provides extensions in following areas :

       o  NFSv4 ACL Interfaces with configurable options for GPFS

       o  Kernel oplock support on GPFS

       o  Lease support on GPFS



NOTE:This  module  follows the posix-acl behaviour and hence allows permission
stealing via chown. Samba might allow at a later point in  time,  to  restrict
the  chown  via this module as such restrictions are the responsibility of the
underlying filesystem than of Samba.

This module is stackable.

OPTIONS
       nfs4:mode = [ simple | special ]
          Enable/Disable substitution of special IDs on GPFS.  This  parameter
          should  not affect the windows users in anyway. It only ensures that
          Samba sets the special IDs - OWNER@ and GROUP@ ( mappings to  simple
          uids ) that are relevant to GPFS.

          The following MODEs are understood by the module:

             o  simple(default) - do not use special IDs in GPFS ACEs

             o  special - use special IDs in GPFS ACEs.

       nfs4:acedup = [dontcare|reject|ignore|merge]
          This  parameter  configures how Samba handles duplicate ACEs encoun-
          tered in GPFS ACLs. GPFS allows/creates duplicate ACE for  different
          bits for same ID.

          Following is the behaviour of Samba for different values :

             o  dontcare (default) - copy the ACEs as they come

             o  reject - stop operation and exit with error on ACL set op

             o  ignore - don't include the second matching ACE

             o  merge - bitwise OR the 2 ace.flag fields and 2 ace.mask fields
                of the 2 duplicate ACEs into 1 ACE

       nfs4:chown = [yes|no]
          This parameter allows enabling or disabling the chown  supported  by
          the  underlying  filesystem.  This  parameter should be enabled with
          care as it might leave your system insecure.

          Some filesystems allow chown as a) giving b)  stealing.  It  is  the
          latter that is considered a risk.

          Following is the behaviour of Samba for different values :

             o  yes - Enable chown if as supported by the under filesystem

             o  no (default) - Disable chown

EXAMPLES
       A GPFS mount can be exported via Samba as follows :


               [samba_gpfs_share]
            vfs objects = gpfs
            path = /test/gpfs_mount
            nfs4: mode = special
            nfs4: acedup = merge


CAVEATS
       The gpfs gpl libraries are required by gpfs VFS module during both com-
       pilation and runtime. Also this VFS module is tested to  work  on  SLES
       9/10 and RHEL 4.4

VERSION
       This man page is correct for version 3.0.25 of the Samba suite.

AUTHOR
       The  original  Samba  software  and  related  utilities were created by
       Andrew Tridgell. Samba is now developed by the Samba Team  as  an  Open
       Source project similar to the way the Linux kernel is developed.

       The GPFS VFS module was created with contributions from Volker Lendecke
       and the developers at IBM.

       This manpage was created by the IBM FSCC team




